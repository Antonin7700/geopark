import folium
import requests

# URL de l'API des parkings disponibles à Paris (exemple fictif)
url = "https://api.opendata.paris.fr/api/records/1.0/search/?dataset=les-stations-de-parkings&q=&rows=50"

# Récupérer les données depuis l'API
response = requests.get(url)
data = response.json()

# Extraire les informations des parkings
parkings = data['records']

# Créer une carte centrée sur Paris
paris_coords = [48.8566, 2.3522]
map_paris = folium.Map(location=paris_coords, zoom_start=13)

# Ajouter les parkings à la carte
for parking in parkings:
    coords = parking['geometry']['coordinates']
    folium.Marker(
        location=[coords[1], coords[0]],
        popup=folium.Popup(f"Parking: {parking['fields']['nom']}<br>Places disponibles: {parking['fields']['places_disponibles']}", max_width=300),
        icon=folium.Icon(color='blue', icon='info-sign')
    ).add_to(map_paris)

# Enregistrer la carte dans un fichier HTML
map_paris.save('paris_parkings.html')

# Pour afficher la carte dans un notebook Jupyter, utilisez :
map_paris
